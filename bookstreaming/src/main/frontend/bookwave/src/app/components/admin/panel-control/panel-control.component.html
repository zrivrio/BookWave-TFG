<div class="max-w-7xl mx-auto p-4 md:p-8">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-[#1E0f75]">Panel de Control - Solicitudes de Ayuda</h2>
        <div class="flex gap-2">
            <span class="px-3 py-1 bg-[#E6F0F7] text-[#1E0f75] rounded-full text-sm">
                Total: {{helpRequests.length}}
            </span>
        </div>
    </div>

    <!-- Estado de carga y error -->
    <div *ngIf="loading" class="mb-4 p-4 bg-blue-50 text-blue-700 rounded-lg">
        Cargando solicitudes...
    </div>
    <div *ngIf="error" class="mb-4 p-4 bg-red-50 text-red-700 rounded-lg">
        {{error}}
    </div>

    <!-- Tarjetas de estado -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
        <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4">
            <div class="flex items-center justify-between">
                <h3 class="text-blue-700 font-semibold">Pendientes</h3>
                <span class="text-2xl font-bold text-blue-700">
                    {{getStatusRequests(HelpStatus.PENDING).length}}
                </span>
            </div>
        </div>
        <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4">
            <div class="flex items-center justify-between">
                <h3 class="text-yellow-700 font-semibold">En Proceso</h3>
                <span class="text-2xl font-bold text-yellow-700">
                    {{getStatusRequests(HelpStatus.IN_PROGRESS).length}}
                </span>
            </div>
        </div>
        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4">
            <div class="flex items-center justify-between">
                <h3 class="text-green-700 font-semibold">Completadas</h3>
                <span class="text-2xl font-bold text-green-700">
                    {{getStatusRequests(HelpStatus.RESOLVED).length}}
                </span>
            </div>
        </div>
        <div class="bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4">
            <div class="flex items-center justify-between">
                <h3 class="text-red-700 font-semibold">Canceladas</h3>
                <span class="text-2xl font-bold text-red-700">
                    {{getStatusRequests(HelpStatus.CANCELLED).length}}
                </span>
            </div>
        </div>
    </div>

    <!-- Kanban Board -->
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
        <!-- Columna Pendientes -->
        <div class="bg-gray-50 rounded-xl p-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="font-semibold text-gray-700">Pendientes</h3>
                <span class="px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">
                    {{getStatusRequests(HelpStatus.PENDING).length}}
                </span>
            </div>
            <div class="space-y-3">
                <div *ngFor="let request of getStatusRequests(HelpStatus.PENDING)"
                     class="bg-white p-4 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-medium text-gray-900">{{request.subject}}</h4>
                        <span class="text-xs text-gray-500">{{request.createdAt | date:'short'}}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">{{request.message}}</p>
                    <div class="flex items-center justify-between">
                        <span class="text-xs text-gray-500">{{request.user.username}}</span>
                        <button (click)="updateHelpStatus(request, HelpStatus.IN_PROGRESS)"
                                class="text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded-full hover:bg-blue-200 transition-colors">
                            Iniciar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Columna En Proceso -->
        <div class="bg-gray-50 rounded-xl p-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="font-semibold text-gray-700">En Proceso</h3>
                <span class="px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm">
                    {{getStatusRequests(HelpStatus.IN_PROGRESS).length}}
                </span>
            </div>
            <div class="space-y-3">
                <div *ngFor="let request of getStatusRequests(HelpStatus.IN_PROGRESS)"
                     class="bg-white p-4 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-medium text-gray-900">{{request.subject}}</h4>
                        <span class="text-xs text-gray-500">{{request.createdAt | date:'short'}}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">{{request.message}}</p>
                    <div class="flex items-center justify-between">
                        <span class="text-xs text-gray-500">{{request.user.username}}</span>
                        <div class="flex gap-2">
                            <button (click)="updateHelpStatus(request, HelpStatus.RESOLVED)"
                                    class="text-xs bg-green-100 text-green-700 px-3 py-1 rounded-full hover:bg-green-200 transition-colors">
                                Completar
                            </button>
                            <button (click)="updateHelpStatus(request, HelpStatus.CANCELLED)"
                                    class="text-xs bg-red-100 text-red-700 px-3 py-1 rounded-full hover:bg-red-200 transition-colors">
                                Cancelar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Columna Completadas -->
        <div class="bg-gray-50 rounded-xl p-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="font-semibold text-gray-700">Completadas</h3>
                <span class="px-2 py-1 bg-green-100 text-green-700 rounded-full text-sm">
                    {{getStatusRequests(HelpStatus.RESOLVED).length}}
                </span>
            </div>
            <div class="space-y-3">
                <div *ngFor="let request of getStatusRequests(HelpStatus.RESOLVED)"
                     class="bg-white p-4 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-medium text-gray-900">{{request.subject}}</h4>
                        <span class="text-xs text-gray-500">{{request.createdAt | date:'short'}}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">{{request.message}}</p>
                    <div class="flex items-center justify-between">
                        <span class="text-xs text-gray-500">{{request.user.username}}</span>
                        <button (click)="updateHelpStatus(request, HelpStatus.PENDING)"
                                class="text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded-full hover:bg-blue-200 transition-colors">
                            Reabrir
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Columna Canceladas -->
        <div class="bg-gray-50 rounded-xl p-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="font-semibold text-gray-700">Canceladas</h3>
                <span class="px-2 py-1 bg-red-100 text-red-700 rounded-full text-sm">
                    {{getStatusRequests(HelpStatus.CANCELLED).length}}
                </span>
            </div>
            <div class="space-y-3">
                <div *ngFor="let request of getStatusRequests(HelpStatus.CANCELLED)"
                     class="bg-white p-4 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-medium text-gray-900">{{request.subject}}</h4>
                        <span class="text-xs text-gray-500">{{request.createdAt | date:'short'}}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">{{request.message}}</p>
                    <div class="flex items-center justify-between">
                        <span class="text-xs text-gray-500">{{request.user.username}}</span>
                        <button (click)="updateHelpStatus(request, HelpStatus.PENDING)"
                                class="text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded-full hover:bg-blue-200 transition-colors">
                            Reabrir
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>