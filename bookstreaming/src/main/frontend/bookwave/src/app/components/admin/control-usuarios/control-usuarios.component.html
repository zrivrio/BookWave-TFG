<div class="max-w-7xl mx-auto p-4 md:p-8">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-[#1E0f75]">Gestión de Usuarios</h2>
    <button class="px-4 py-2 bg-[#1C1DAB] hover:bg-[#1E0F75] text-white rounded-lg font-medium transition-colors" 
            (click)="showCreateForm()">
      Crear Usuario
    </button>
  </div>

  <!-- Tabla de usuarios -->
  <div class="bg-white rounded-xl shadow-sm border border-[#F4F4F4] overflow-x-auto">
    <table class="w-full">
      <thead class="bg-[#F8FAFC] border-b border-[#E0E9F5]">
        <tr>
          <th class="px-6 py-3 text-left text-sm font-medium text-[#666666]">ID</th>
          <th class="px-6 py-3 text-left text-sm font-medium text-[#666666]">Usuario</th>
          <th class="px-6 py-3 text-left text-sm font-medium text-[#666666]">Email</th>
          <th class="px-6 py-3 text-left text-sm font-medium text-[#666666]">Rol</th>
          <th class="px-6 py-3 text-left text-sm font-medium text-[#666666]">Tipo de Suscripción</th>
          <th class="px-6 py-3 text-right text-sm font-medium text-[#666666]">Acciones</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-[#E0E9F5]">
        <tr *ngFor="let user of users" class="hover:bg-[#F8FAFC]">
          <td class="px-6 py-4 text-sm text-[#2A2A2A]">{{user.id}}</td>
          <td class="px-6 py-4 text-sm text-[#2A2A2A]">{{user.username}}</td>
          <td class="px-6 py-4 text-sm text-[#2A2A2A]">{{user.email}}</td>
          <td class="px-6 py-4 text-sm text-[#2A2A2A]">{{user.role}}</td>
          <td class="px-6 py-4 text-sm">
            <span class="px-3 py-1 rounded-full text-sm font-medium"
                  [ngClass]="{
                    'bg-[#E6F0F7] text-[#1E0f75]': user.subscriptionType === 'Free',
                    'bg-[#1E0f75] text-white': user.subscriptionType === 'Premium'
                  }">
              {{user.subscriptionType}}
            </span>
          </td>
          <td class="px-6 py-4 text-right space-x-2">
            <button class="px-3 py-1 text-[#1E0f75] hover:bg-[#E6F0F7] rounded-lg transition-colors" 
                    (click)="updateUser(user)">
              Editar
            </button>
            <button class="px-3 py-1 text-red-600 hover:bg-red-50 rounded-lg transition-colors" 
                    (click)="deleteUser(user.id)">
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal de edición -->
  <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center" 
       [style.display]="editMode ? 'flex' : 'none'">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full mx-4">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-xl font-bold text-[#1E0f75]">Editar Usuario</h3>
          <button class="text-[#666666] hover:text-[#2A2A2A]" (click)="cancelEdit()">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>
        <form *ngIf="selectedUser">
          <!-- Mensaje de error -->
          <div *ngIf="errorMessage" class="mb-4 p-3 bg-red-50 text-red-600 rounded-lg">
            {{ errorMessage }}
          </div>
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-[#666666] mb-1">Usuario</label>
              <input type="text" 
                     [(ngModel)]="selectedUser.username" 
                     name="username"
                     class="w-full px-4 py-2 border border-[#E0E0E0] rounded-lg focus:ring-2 focus:ring-[#1E0f75] focus:border-[#1E0f75] transition">
            </div>
            <div>
              <label class="block text-sm font-medium text-[#666666] mb-1">Email</label>
              <input type="email" 
                     [(ngModel)]="selectedUser.email" 
                     name="email"
                     class="w-full px-4 py-2 border border-[#E0E0E0] rounded-lg focus:ring-2 focus:ring-[#1E0f75] focus:border-[#1E0f75] transition">
            </div>
            <div>
              <label class="block text-sm font-medium text-[#666666] mb-1">Tipo de Usuario</label>
              <select [(ngModel)]="selectedUser.role" name="role"
                      class="w-full px-4 py-2 border border-[#E0E0E0] rounded-lg focus:ring-2 focus:ring-[#1E0f75] focus:border-[#1E0f75] transition">
                <option [value]="Role.User">Usuario Normal</option>
                <option [value]="Role.Admin">Administrador</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-[#666666] mb-1">Tipo de Suscripción</label>
              <select [(ngModel)]="selectedUser.subscriptionType" name="subscriptionType"
                      class="w-full px-4 py-2 border border-[#E0E0E0] rounded-lg focus:ring-2 focus:ring-[#1E0f75] focus:border-[#1E0f75] transition">
                <option [value]="SubscriptionType.Free">Gratis</option>
                <option [value]="SubscriptionType.Premium">Premium</option>
              </select>
            </div>
          </div>
          <div class="flex justify-end gap-3 mt-6">
            <button type="button" 
                    class="px-4 py-2 border border-[#1E0f75] text-[#1E0f75] hover:bg-[#E6F0F7] rounded-lg transition-colors"
                    (click)="cancelEdit()">
              Cancelar
            </button>
            <button type="button" 
                    class="px-4 py-2 bg-[#1C1DAB] hover:bg-[#1E0F75] text-white rounded-lg transition-colors"
                    (click)="saveUser()">
              Guardar
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal de creación -->
  <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center" 
       [style.display]="createMode ? 'flex' : 'none'">
    <div class="bg-white rounded-xl shadow-xl max-w-md w-full mx-4">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-xl font-bold text-[#1E0f75]">Crear Usuario</h3>
          <button class="text-[#666666] hover:text-[#2A2A2A]" (click)="cancelCreate()">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>
        <form>
          <!-- Mensaje de error -->
          <div *ngIf="errorMessage" class="mb-4 p-3 bg-red-50 text-red-600 rounded-lg">
            {{ errorMessage }}
          </div>
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-[#666666] mb-1">Usuario</label>
              <input type="text" 
                     [(ngModel)]="newUser.username" 
                     name="username"
                     class="w-full px-4 py-2 border border-[#E0E0E0] rounded-lg focus:ring-2 focus:ring-[#1E0f75] focus:border-[#1E0f75] transition">
            </div>
            <div>
              <label class="block text-sm font-medium text-[#666666] mb-1">Email</label>
              <input type="email" 
                     [(ngModel)]="newUser.email" 
                     name="email"
                     class="w-full px-4 py-2 border border-[#E0E0E0] rounded-lg focus:ring-2 focus:ring-[#1E0f75] focus:border-[#1E0f75] transition">
            </div>
            <div>
              <label class="block text-sm font-medium text-[#666666] mb-1">Contraseña</label>
              <input type="password" 
                     [(ngModel)]="newUser.password" 
                     name="password"
                     class="w-full px-4 py-2 border border-[#E0E0E0] rounded-lg focus:ring-2 focus:ring-[#1E0f75] focus:border-[#1E0f75] transition">
            </div>

            <div>
              <label class="block text-sm font-medium text-[#666666] mb-1">Tipo de Usuario</label>
              <select [(ngModel)]="newUser.role" name="role"
                      class="w-full px-4 py-2 border border-[#E0E0E0] rounded-lg focus:ring-2 focus:ring-[#1E0f75] focus:border-[#1E0f75] transition">
                <option [value]="Role.User">Usuario Normal</option>
                <option [value]="Role.Admin">Administrador</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-[#666666] mb-1">Tipo de Suscripción</label>
              <select [(ngModel)]="newUser.subscriptionType" name="subscriptionType"
                      class="w-full px-4 py-2 border border-[#E0E0E0] rounded-lg focus:ring-2 focus:ring-[#1E0f75] focus:border-[#1E0f75] transition">
                <option [value]="SubscriptionType.Free">Gratis</option>
                <option [value]="SubscriptionType.Premium">Premium</option>
              </select>
            </div>
          </div>
          <div class="flex justify-end gap-3 mt-6">
            <button type="button" 
                    class="px-4 py-2 border border-[#1E0f75] text-[#1E0f75] hover:bg-[#E6F0F7] rounded-lg transition-colors"
                    (click)="cancelCreate()">
              Cancelar
            </button>
            <button type="button" 
                    class="px-4 py-2 bg-[#1C1DAB] hover:bg-[#1E0F75] text-white rounded-lg transition-colors"
                    (click)="createUser()">
              Crear
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>